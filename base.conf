[General]
loglevel = notify
skip-proxy = localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, guzzoni.apple.com, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32

wifi-assist = true
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153

tls-provider = openssl
network-framework = false
exclude-simple-hostnames = true
ipv6 = true

test-timeout = 4
proxy-test-url = http://www.gstatic.com/generate_204
geoip-maxmind-url = https://unpkg.zhimg.com/rulestatic@1.0.1/Country.mmdb

[Proxy Group]
Aggregate = select, include-other-group=""
Proxy = select, Auto, "ğŸ‡­ğŸ‡° HK", "ğŸ‡¸ğŸ‡¬ SGP", "ğŸ‡¨ğŸ‡³ TW", "ğŸ‡¯ğŸ‡µ JP", "ğŸ‡ºğŸ‡¸ USA", "ğŸ‡ºğŸ‡³ Other", include-other-group=""
Auto = smart, include-other-group="", url=http://www.gstatic.com/generate_204, interval=600
âœ¨ AI = select, "ğŸ‡¸ğŸ‡¬ SGP", "ğŸ‡¨ğŸ‡³ TW", "ğŸ‡¯ğŸ‡µ JP", "ğŸ‡ºğŸ‡¸ USA"
ğŸ‡­ğŸ‡° HK = smart, policy-regex-filter=(é¦™æ¸¯|HK|Hong Kong|ğŸ‡­ğŸ‡°|HongKong), include-other-group="", url=http://www.gstatic.com/generate_204, interval=600
ğŸ‡¸ğŸ‡¬ SGP = smart, policy-regex-filter=(å¹¿æ–°|æ–°åŠ å¡|SG|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|Singapore), include-other-group="", url=http://www.gstatic.com/generate_204, interval=600
ğŸ‡¨ğŸ‡³ TW = smart, policy-regex-filter=(å¹¿å°|å°æ¹¾|å°ç£|TW|Tai Wan|ğŸ‡¹ğŸ‡¼|ğŸ‡¨ğŸ‡³|TaiWan|Taiwan), include-other-group="", url=http://www.gstatic.com/generate_204, interval=600
ğŸ‡¯ğŸ‡µ JP = smart, policy-regex-filter=(å¹¿æ—¥|æ—¥æœ¬|JP|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|ğŸ‡¯ğŸ‡µ|Japan), include-other-group="", url=http://www.gstatic.com/generate_204, interval=600
ğŸ‡ºğŸ‡¸ USA = smart, policy-regex-filter=(å¹¿ç¾|ç¾|USA|çº½çº¦|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|ğŸ‡ºğŸ‡¸|United States), include-other-group="", url=http://www.gstatic.com/generate_204, interval=600
ğŸ‡ºğŸ‡³ Other = smart, policy-regex-filter=(æ³¢|æŸ¬|æ–¯|å°¼|ä¹Ÿ|å…‹|æ¯”|å°”|ç«‹|å†°|ç§˜|è€³|åˆ©|åŸƒ|å¸Œ|æ–¯|å­Ÿ|èŠ¬|é˜¿|æ„›|æ¾³|è‹±|å¾·|å—|æ„|æ³•|æ‹¿|å¢¨|å°|è¶Š|ä¿„|ç‘|æ™º|è·|æ¯”|å·´|æ²™|ç­|æ³°|å¾·|çƒ|ä»¥|Australia|Konghwaguk), include-other-group="", url=http://www.gstatic.com/generate_204, interval=600

[Rule]

# AI
RULE-SET,https://raw.githubusercontent.com/lin-youxiang/funnysurge/refs/heads/main/rules/AI.txt,"âœ¨ AI"

# Game
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Steam/Steam.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Epic/Epic.list,DIRECT

# Proxy
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/proxy.txt,Proxy
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/telegramcidr.txt,Proxy

# DIRECT
RULE-SET,SYSTEM,DIRECT
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/private.txt,DIRECT
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/icloud.txt,DIRECT
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/apple.txt,DIRECT
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/google.txt,DIRECT
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/direct.txt,DIRECT
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/cncidr.txt,DIRECT
RULE-SET,LAN,DIRECT

# Ad blocking
RULE-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/reject.txt,REJECT

# Remaining unmatched domestic websites
DOMAIN-SUFFIX,cn,DIRECT
DOMAIN-KEYWORD,-cn,DIRECT

# Final rule
GEOIP,CN,DIRECT
FINAL,Proxy,dns-failed

[URL Rewrite]
^https?://(www.)?(g|google).cn https://www.google.com 302
